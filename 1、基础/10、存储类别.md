# 存储类别

**翻译单元——编译器源代码文件和它所包含的所有的头文件都看成一个包含信息的单独文件。**  

作用域和链接描述了标识符的可见性。  

在绝大多数情况下，不能在声明中使用多个存储类别说明符，所以则意味着不能使用多个存储类别说明符作为 typedef 的一部分。唯一例外的是 _Thread_local，它可以和 static 和 extern 一起使用。

<table>
    <tr>
        <th>序号</th>
        <th>存储类别</th>
        <th>存储期</th>
        <th>作用域</th>
        <th>链接</th>
        <th>声明区域</th>
        <th>描述</th>
    </tr>
    <tr>
        <td>1</td>
        <td>[auto] 自动变量</td>
        <td>自动</td>
        <td>块</td>
        <td>无</td>
        <td>块内/函数头</td>
        <td>块级作用域的变量都是自动存储期，可以忽略auto关键字。<br>如果使用auto关键字是为了显式区分同名的全局变量。
未初始时，存储的是垃圾值。<br><b>auto关键字在C++中的用法完全不同，如果编写C/C++兼容的程序，最好不要使用auto作为存储类别说明符。</b></td>
    </tr>
    <tr>
        <td>2</td>
        <td>register 寄存器变量</td>
        <td>自动</td>
        <td>块</td>
        <td>无</td>
        <td>块内/函数头</td>
        <td>寄存器变量储存在CPU的寄存器中。<br>访问速度块，但无法获取其地址。<br>可声明为register的数据类型有限，不能声明double类型。<br>  <b>编译器必须根据寄存器或最快可用内存的数量衡量/忽略请求。寄存器变量有可能变为自动变量。但即使是这样，仍然不能对该变量使用地址运算符。</b> </td>
    </tr>
     <tr>
        <td>3</td>
        <td>全局变量</td>
        <td>静态</td>
        <td>文件</td>
        <td>外部</td>
        <td>所有函数外</td>
        <td>全局变量自动具有静态存储期。<br>未初始化时，存储的是0。<br>只能初始化一次。 </td>
    </tr>   
     <tr>
        <td>4</td>
        <td>static 全局变量</td>
        <td>静态</td>
        <td>文件</td>
        <td>内部</td>
        <td>所有函数外</td>
        <td>只能用于同一个文件中的函数。<br>关键字static表明了其具有内部链接，而非存储期</td>
    </tr>      
       <tr>
        <td>5</td>
        <td>static 局部变量</td>
        <td>静态</td>
        <td>块</td>
        <td>无</td>
        <td>块内/函数头</td>
        <td>程序离开它们所在的函数后，这些变量不会消失，计算机在多次函数调用之间会记录它们的值。<br>未初始化时，存储的是0。</td>
    </tr>      
     
</table>

<br>

### 作用域
作用域描述程序中可访问标识符的区域。
<table>
    <tr>
        <th>序号</th>
        <th>作用域</th>
        <th>描述</th>
    </tr>
    <tr>
        <td>1</td>
        <td>块<br>block</td>
        <td>【作用范围】从定义处到包含该定义的块的末尾<br>【注释】块是用一对花括号括起来的代码区域。<br>【具体块】for循环、while循环、do while循环、if循环（此时不必须花括号）</td>
    </tr>
        <tr>
        <td>2</td>
        <td>函数<br>function</td>
        <td>【作用范围】整个函数体<br>仅用于goto语句的标签。</td>
    </tr>
         <tr>
        <td>3</td>
        <td>函数原型<br>function prototype</td>
        <td>【作用范围】从形参定义处到原型声明结束<br>【注释】编译器在处理函数原型中的形参时只关心它的类型，形参名可忽略， 也不必与函数定义中的形参名相匹配。</td>
    </tr>   
            <tr>
        <td>4</td>
        <td>文件<br>file</td>
        <td>【作用范围】从定义处到文件末尾及整个翻译单元，全局变量。</td>
    </tr>
    
</table>

<br>

### 链接
<table>
    <tr>
        <th>序号</th>
        <th>链接</th>
        <th>描述</th>
    </tr>
    <tr>
        <td>1</td>
        <td>无链接<br>none</td>
        <td>声明的同名变量被当作独立不同的实体。</td>
    </tr>
        <tr>
        <td>2</td>
        <td>内部链接<br>internal</td>
        <td>单个翻译单元中声明的同名变量表示同一个实体。<br>
使用static关键字可以将外部连接修改为内部连接。链接属性只能修改一次，一旦将标识符的链接属性变为内部链接，就无法变回外部链接。</td>
    </tr>
         <tr>
        <td>3</td>
        <td>外部链接<br>external</td>
        <td>多个翻译单元中声明的同名变量表示同一个实体。<br>可在其他翻译单元使用本翻译单元的全局变量。</td>
    </tr>   

    
</table>

<br>

### 存储期
指对象在内存中保留了多长时间。
 
对于并发编程，对象可以在特定线程的执行期存在。可以通过函数调用的方式显式分配和释放内存。

<table>
    <tr>
        <th>序号</th>
        <th>存储期</th>
        <th>描述</th>
    </tr>
    <tr>
        <td>1</td>
        <td>自动存储期</td>
        <td>程序在进入该变量声明所在的块时变量存在，程序退出该块时变量消失，该变量占用的内存被释放。<br>
<b>变长数组稍作不同，它们的存储期从声明处到块的末尾，而不是从块的开始到块的末尾。</b></td>
    </tr>
        <tr>
        <td>2</td>
        <td>静态存储期</td>
        <td>在程序的执行期间一直存在。<br>
文件作用域具有静态存储期。</td>
    </tr>
         <tr>
        <td>3</td>
        <td>线程存储期</td>
        <td>用于并发程序设计，程序执行可被分为多个线程。<br>
具有线程存储期的对象，从被声明时到线程结束一直存在。<br>
以关键字_Thread_local 声明一个对象时，每个线程都获得该变量的私有备份。</td>
    </tr>   
        <tr>
        <td>4</td>
        <td>动态分配存储期</td>
        <td>——</td>
    </tr>
    
</table>











